<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Edit Bookstore</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
    <script type="text/javascript">
        var stompClient = null;

        function connect() {
            var socket = new SockJS('/chat');
            stompClient = Stomp.over(socket);
            stompClient.connect({}, function(frame) {
                console.log('Connected: ' + frame);
                stompClient.subscribe('/topic/messages', function(messageOutput) {
                    showMessageOutput(JSON.parse(messageOutput.body));
                });
            });
        }
        function sendBook() {
            var x = document.getElementById("bookTitle").value;
            stompClient.send("/app/chat", {},
                JSON.stringify({'title':x}));
        }

        function showMessageOutput(messageOutput) {
        }
    </script>
</head>
<body onload="connect()">

<!-- Upload Books-->
<h2>Upload Book</h2>
<form id="addBook" name="addBook" th:action="@{/uploadBook}" method="post" class="container">
    <label>Title:</label><br>
    <input id="bookTitle" type="text" name="title"><br><br>
    <label>ISBN:</label><br>
    <input type="text" name="isbn"><br><br>
    <label>Description:</label><br>
    <input type="text" name="description"><br><br>
    <label>Author:</label><br>
    <input type="text" name="author"><br><br>
    <label>Publisher:</label><br>
    <input type="text" name="publisher"><br><br>
    <label>Genre:</label><br>
    <select name="genre" id="genre" form="addBook">
        <option value="Fiction">Fiction</option>
        <option value="Nonfiction">Nonfiction</option>
        <option value="Fantasy">Fantasy</option>
        <option value="Horror">Horror</option>
        <option value="Crime">Crime</option>
        <option value="Science Fiction">Science Fiction</option>
        <option value="History">History</option>
        <option value="Inspirational">Inspirational</option>
        <option value="Drama">Drama</option>
        <option value="Poetry">Poetry</option>
        <option value="Folktail">Folktail</option>
        <option value="Mystery">Mystery</option>
        <option value="Thriller">Thriller</option>
        <option value="Romance">Romance</option>
        <option value="Contemporary">Contemporary</option>
        <option value="Biography">Biography</option>
        <option value="Comedy">Comedy</option>
        <option value="Adventure">Adventure</option>
    </select><br><br>
    <label>Quantity:</label><br>
    <select id="quantity" form="addBook" name="quantity" class="numbers">
        <script type="text/javascript">
            var select = $(".numbers");
            for (let i=1;i<=100;i++){
                select.append($('<option></option>').val(i).html(i));
            }
        </script>
    </select><br><br>
    <label>Picture URL</label>
    <input type="url" id="picture" name="picture" /><br><br>


    <input onclick="sendBook()" id="addButton" type="submit" value="Add Book" class="button" ><br><br>
</form>

<form th:action="@{/bookstore}" method="post">
    <button>Return to Bookstore</button>
</form>

</body>
</html>